let getCurrentTimeStamp=()=>{let e=new Date;document.getElementById("current-timestamp").setAttribute("title",e.toLocaleDateString("en-us",{weekday:"long",month:"long",day:"2-digit",year:"numeric"})),document.getElementById("current-time").innerText=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),document.getElementById("current-date").innerText=e.toLocaleDateString(),setTimeout(getCurrentTimeStamp,1e3)};getCurrentTimeStamp(),document.addEventListener("contextmenu",e=>{e.preventDefault()},!1);const mainArea=document.querySelector("main"),mainDesktop=document.querySelector("#desktop"),aboutSection=document.querySelector(".about"),skillsSection=document.querySelector(".skills"),projectsSection=document.querySelector(".projects"),contactSection=document.querySelector(".contact"),screenShareSection=document.querySelector(".screenShare"),powerOff=document.querySelector("#powerOff"),textEditor=document.querySelector("#text-editor"),terminal=document.querySelector("#terminal"),about=document.querySelector("#about"),skills=document.querySelector("#skills"),projects=document.querySelector("#projects"),contact=document.querySelector("#contact"),startMenuSection=document.querySelector("#start-menu-icon"),startMenuBox=document.querySelector(".start-menu-elements"),upArrowSection=document.querySelector("#up-arrow"),upArrowBox=document.querySelector(".up-arrow-elements"),messageIcon=document.querySelector("#message-icon"),messageBox=document.querySelector(".message-box-elements"),toggleClipBoard=document.querySelector("#clipboard"),toggleLocation=document.querySelector("#location"),mousePosition=document.querySelector("#mousePosition"),screenCapture=document.querySelector("#screenCapture"),screenShareVideo=document.querySelector("#screenShareVideo"),screenShareLogs=document.querySelector("#screenShareLogs"),toggleScreenShare=document.querySelector("#toggleCapture");fetch("https://api.ipify.org/?format=json").then(e=>e.json()).then(e=>{document.querySelector("#publicIP").innerHTML=`<strong>${e.ip}</strong>`}),toggleClipBoard.addEventListener("click",()=>{navigator.clipboard.readText().then(e=>alert(`Your Clipboard!\n${e}`))}),toggleLocation.addEventListener("click",()=>{navigator.geolocation.getCurrentPosition(e=>{alert(`Your Location!\nLatitude: ${e.coords.latitude},\nLongitude: ${e.coords.longitude},\nAccuracy: ${e.coords.accuracy} meters!`)},e=>{alert(`There was an error.\nERROR ${e.code}: ${e.message}`)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),document.body.addEventListener("mousemove",e=>{mousePosition.innerHTML=`Co-ordinates<br><strong>x: ${e.clientX} | y: ${e.clientY}</strong>`}),screenCapture.addEventListener("click",async()=>{screenCapture.style="pointer-events: none;";new WinBox("ðŸ’» | Screen Capture |",{class:["no-full","screenShareDesign"],background:"#9e1616",border:2,x:"center",y:"center",width:"70%",height:"90%",mount:screenShareSection,bottom:48,onfocus:()=>{toggleScreenShare.onclick=(async()=>{if("Start Capturing"===toggleScreenShare.innerText)try{screenShareVideo.srcObject=await navigator.mediaDevices.getDisplayMedia(),screenShareVideo.srcObject&&(toggleScreenShare.innerText="Stop Capturing",screenShareLogs.innerHTML="")}catch(e){if(null!==screenShareVideo.srcObject&&"function"==typeof screenShareVideo.srcObject.getTracks){let e=screenShareVideo.srcObject.getTracks();e.forEach(e=>e.stop())}screenShareVideo.srcObject=null,toggleScreenShare.innerText="Start Capturing",screenShareLogs.innerHTML="Your Device is unsupported, or you haven't granted enough permissions!"}else if("Stop Capturing"===toggleScreenShare.innerText){screenShareLogs.innerHTML="";let e=screenShareVideo.srcObject.getTracks();e.forEach(e=>e.stop()),screenShareVideo.srcObject=null,toggleScreenShare.innerText="Start Capturing"}})},onclose:()=>{if(screenCapture.style="pointer-events: initial",null!==screenShareVideo.srcObject&&"function"==typeof screenShareVideo.srcObject.getTracks){let e=screenShareVideo.srcObject.getTracks();e.forEach(e=>e.stop())}screenShareVideo.srcObject=null,toggleScreenShare.innerText="Start Capturing"}})}),document.body.addEventListener("click",e=>{if(startMenuSection.contains(e.target)){if(startMenuSection.hasAttribute("clicked"))return startMenuSection.removeAttribute("clicked"),startMenuSection.removeAttribute("style"),void(startMenuBox.style.display="none");startMenuSection.setAttribute("clicked","true"),startMenuSection.setAttribute("style","background-color: rgba(255, 255, 255, 0.1) !important"),startMenuBox.style.display="flex"}else startMenuSection.contains(e.target)||startMenuBox.contains(e.target)||(startMenuSection.hasAttribute("clicked")&&startMenuSection.removeAttribute("clicked"),startMenuSection.hasAttribute("style")&&startMenuSection.removeAttribute("style"),startMenuBox.style.display="none");if(upArrowSection.contains(e.target)){if(upArrowSection.hasAttribute("clicked"))return upArrowSection.removeAttribute("clicked"),void(upArrowBox.style.display="none");upArrowSection.setAttribute("clicked","true"),upArrowBox.style.display="flex"}else upArrowBox.contains(e.target)||(upArrowSection.hasAttribute("clicked")&&upArrowSection.removeAttribute("clicked"),upArrowBox.style.display="none");if(messageIcon.contains(e.target)){if(messageIcon.hasAttribute("clicked"))return messageIcon.removeAttribute("clicked"),void(messageBox.style.display="none");messageIcon.setAttribute("clicked","true"),messageBox.style.display="flex"}else messageBox.contains(e.target)||(messageIcon.hasAttribute("clicked")&&messageIcon.removeAttribute("clicked"),messageBox.style.display="none")},!0);const minimizeAllWindows=()=>{let e=document.querySelectorAll(".wb-min");for(let t=0;t<e.length;t++)e[t].click()};powerOff.addEventListener("click",()=>{powerOff.style="pointer-events: none;";new WinBox("ðŸ¤– | System Alert |",{class:["modal","powerOffDesign"],background:"#9e1616",border:2,x:"center",y:"center",html:"The system will restart in&nbsp;<span id='restartDuration'></span>&nbsp;seconds.",width:"80%",height:"20%",bottom:48,onfocus:()=>{setTimeout(()=>{location.reload()},1e4);let e=10;setInterval(()=>{0!=e&&(document.getElementById("restartDuration").innerHTML=e,e--)},1e3)},onclose:()=>{powerOff.style="pointer-events: initial"}})}),textEditor.addEventListener("click",()=>{textEditor.style="pointer-events: none; border-bottom: 2px solid rgba(255, 255, 255, 0.5);";new WinBox("ðŸ“° WHOISCode",{class:["no-full","modern"],background:"#9e1616",border:2,url:"https://github1s.com/TheBinitGhimire/TheBinitGhimire.github.io/blob/HEAD/README.md",x:Math.floor(10*Math.random())+"%",y:Math.floor(10*Math.random())+"%",width:"80%",height:"80%",bottom:48,onclose:()=>{textEditor.style="pointer-events: initial"}})}),terminal.addEventListener("click",()=>{terminal.style="pointer-events: none; border-bottom: 2px solid rgba(255, 255, 255, 0.5);";const e=new WinBox("â‹¤â‹¥ WHOISTerminal",{class:["no-full","modern"],background:"#9e1616",border:2,url:"terminal.html",x:"center",y:"center",width:"70%",height:"70%",bottom:48,onclose:()=>{terminal.style="pointer-events: initial"}});window.addEventListener("message",function(t){if(t.origin!==window.location.protocol+"//"+window.location.host)return;const o=t.data;"closeTerminal"==o&&e.close()})}),about.addEventListener("click",()=>{about.style="pointer-events: none;";new WinBox("ðŸ˜Š About Me",{class:["no-full","modern","desktopElementsDesign"],background:"#9e1616",border:2,mount:aboutSection,x:Math.floor(30*Math.random())+"%",y:Math.floor(30*Math.random())+"%",width:"60%",height:"60%",bottom:48,onclose:()=>{about.style="pointer-events: initial"}})}),skills.addEventListener("click",()=>{skills.style="pointer-events: none;";new WinBox("ðŸ‘» My Skills",{class:["no-full","modern","desktopElementsDesign"],background:"#9e1616",border:2,mount:skillsSection,x:Math.floor(30*Math.random())+"%",y:Math.floor(30*Math.random())+"%",width:"60%",height:"60%",bottom:48,onclose:()=>{skills.style="pointer-events: initial"}})}),projects.addEventListener("click",()=>{projects.style="pointer-events: none;";new WinBox("ðŸ›  My Projects",{class:["no-full","modern","desktopElementsDesign"],background:"#9e1616",border:2,mount:projectsSection,x:Math.floor(30*Math.random())+"%",y:Math.floor(30*Math.random())+"%",width:"60%",height:"50%",bottom:48,onclose:()=>{projects.style="pointer-events: initial"}})}),contact.addEventListener("click",()=>{contact.style="pointer-events: none;";new WinBox("ðŸ“± Contact Me",{class:["no-full","modern","desktopElementsDesign"],background:"#9e1616",border:2,mount:contactSection,x:Math.floor(30*Math.random())+"%",y:Math.floor(30*Math.random())+"%",width:"60%",height:"60%",bottom:48,onclose:()=>{contact.style="pointer-events: initial"}})});